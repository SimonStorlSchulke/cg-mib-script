<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="de">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Python Skripte aus der Vorlesung - Datenverarbeitung in der Medienproduktion</title>

    
    <meta name="description" content="Online-Material zur Veranstaltung Datenverarbeitung in der Medienproduktion.">
    
    <link rel="canonical" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/course-python-scripts/">
    

    <meta property="og:url" content="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/course-python-scripts/">
    <meta property="og:title" content="Datenverarbeitung in der Medienproduktion">
    <meta property="og:image" content="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
    <meta name="apple-mobile-web-app-title" content="Datenverarbeitung in der Medienproduktion">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">
    <link rel="icon" type="image/x-icon" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_icon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot');
        src: url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.woff')
               format('woff'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.ttf')
               format('truetype'),
             url('https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/application.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/stylesheets/custom.css">
    
    <script src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/modernizr.js"></script>


  </head>
  <body class="palette-primary-indigo palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Python Skripte aus der Vorlesung
      </div>
    </div>

    

    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion//general" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/images/lecture_logo_dvmp.png">
        </div>
      
      <div class="name">
        <strong>Datenverarbeitung in der Medienproduktion </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Allgemeines</span>
    <ul>
      
        
        



<a  title="Kursinfo" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/general/">
	
	Kursinfo
</a>



      
        
        



<a  title="Links &amp; Literatur" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/links/">
	
	Links &amp; Literatur
</a>



      
        
        



<a  title="Python Style Guide" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/python-style-guide/">
	
	Python Style Guide
</a>



      
        
        



<a class="current" title="Vorlesungs Pythonscripts" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/course-python-scripts/">
	
	Vorlesungs Pythonscripts
</a>


<ul id="scrollspy">
</ul>


      
    </ul>
  
</li>



<li>
  
    <span class="section">Kapitel</span>
    <ul>
      
        
        



<a  title="1. Blender &amp; Scripting-Tools" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter01/exercise01_a/">
	
	1. Blender &amp; Scripting-Tools
</a>



      
        
        



<a  title="2. Python &amp; Blender API" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter02/exercise01_a/">
	
	2. Python &amp; Blender API
</a>



      
        
        



<a  title="3. Operatoren &amp; Addons" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter03/exercise01_a/">
	
	3. Operatoren &amp; Addons
</a>



      
        
        



<a  title="4. Meshgenerierung" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter04/exercise01_a/">
	
	4. Meshgenerierung
</a>



      
        
        



<a  title="5. Animation" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter05/exercise01_a/">
	
	5. Animation
</a>



      
        
        



<a  title="6. Assetgenerierung" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter06/exercise01_a/">
	
	6. Assetgenerierung
</a>



      
        
        



<a  title="7. UI" href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/chapter07/exercise01_a/">
	
	7. UI
</a>



      
    </ul>
  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Python Skripte aus der Vorlesung </h1>

			<h1 id="wise2122">WiSe21/22</h1>
<h2 id="vl4---mesh-generierung">VL4 - Mesh Generierung</h2>
<p><strong>Code-Zwischenstand aus der Vorlesung vom 26.10.21</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">  1</span><span class="cl"><span class="c1"># This program is free software; you can redistribute it and/or modify</span>
</span></span><span class="line"><span class="ln">  2</span><span class="cl"><span class="c1"># it under the terms of the GNU General Public License as published by</span>
</span></span><span class="line"><span class="ln">  3</span><span class="cl"><span class="c1"># the Free Software Foundation; either version 3 of the License, or</span>
</span></span><span class="line"><span class="ln">  4</span><span class="cl"><span class="c1"># (at your option) any later version.</span>
</span></span><span class="line"><span class="ln">  5</span><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="ln">  6</span><span class="cl"><span class="c1"># This program is distributed in the hope that it will be useful, but</span>
</span></span><span class="line"><span class="ln">  7</span><span class="cl"><span class="c1"># WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span></span><span class="line"><span class="ln">  8</span><span class="cl"><span class="c1"># MERCHANTIBILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span>
</span></span><span class="line"><span class="ln">  9</span><span class="cl"><span class="c1"># General Public License for more details.</span>
</span></span><span class="line"><span class="ln"> 10</span><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="ln"> 11</span><span class="cl"><span class="c1"># You should have received a copy of the GNU General Public License</span>
</span></span><span class="line"><span class="ln"> 12</span><span class="cl"><span class="c1"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
</span></span><span class="line"><span class="ln"> 13</span><span class="cl">
</span></span><span class="line"><span class="ln"> 14</span><span class="cl"><span class="n">bl_info</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 15</span><span class="cl">    <span class="s2">&#34;name&#34;</span> <span class="p">:</span> <span class="s2">&#34;MyTestAddon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 16</span><span class="cl">    <span class="s2">&#34;author&#34;</span> <span class="p">:</span> <span class="s2">&#34;Simon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 17</span><span class="cl">    <span class="s2">&#34;description&#34;</span> <span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 18</span><span class="cl">    <span class="s2">&#34;blender&#34;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span></span><span class="line"><span class="ln"> 19</span><span class="cl">    <span class="s2">&#34;version&#34;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span></span><span class="line"><span class="ln"> 20</span><span class="cl">    <span class="s2">&#34;location&#34;</span> <span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 21</span><span class="cl">    <span class="s2">&#34;warning&#34;</span> <span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 22</span><span class="cl">    <span class="s2">&#34;category&#34;</span> <span class="p">:</span> <span class="s2">&#34;Generic&#34;</span>
</span></span><span class="line"><span class="ln"> 23</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln"> 24</span><span class="cl">
</span></span><span class="line"><span class="ln"> 25</span><span class="cl"><span class="kn">import</span> <span class="nn">bpy</span>
</span></span><span class="line"><span class="ln"> 26</span><span class="cl"><span class="kn">import</span> <span class="nn">bmesh</span>
</span></span><span class="line"><span class="ln"> 27</span><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="ln"> 28</span><span class="cl"><span class="kn">import</span> <span class="nn">mathutils</span>
</span></span><span class="line"><span class="ln"> 29</span><span class="cl"><span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="ln"> 30</span><span class="cl">
</span></span><span class="line"><span class="ln"> 31</span><span class="cl"><span class="k">def</span> <span class="nf">map_range</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">from_min</span><span class="p">,</span> <span class="n">from_max</span><span class="p">,</span> <span class="n">to_min</span><span class="p">,</span> <span class="n">to_max</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 32</span><span class="cl">    <span class="s2">&#34;&#34;&#34;Bringt einen Wert v von einer Skala (from_min, from_max) auf eine neue Skala (to_min, to_max)&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="ln"> 33</span><span class="cl">    <span class="k">return</span> <span class="n">to_min</span> <span class="o">+</span> <span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">from_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">to_max</span> <span class="o">-</span> <span class="n">to_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">from_max</span> <span class="o">-</span> <span class="n">from_min</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 34</span><span class="cl">
</span></span><span class="line"><span class="ln"> 35</span><span class="cl"><span class="k">class</span> <span class="nc">OT_Mesh_Grassshrub</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Operator</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 36</span><span class="cl">    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&#34;mesh.grass_generator&#34;</span>
</span></span><span class="line"><span class="ln"> 37</span><span class="cl">    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&#34;Generate Grass&#34;</span>
</span></span><span class="line"><span class="ln"> 38</span><span class="cl">    <span class="n">bl_description</span> <span class="o">=</span> <span class="s2">&#34;Description that shows in blender tooltips&#34;</span>
</span></span><span class="line"><span class="ln"> 39</span><span class="cl">    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;REGISTER&#34;</span><span class="p">,</span> <span class="s2">&#34;UNDO&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="ln"> 40</span><span class="cl">
</span></span><span class="line"><span class="ln"> 41</span><span class="cl">    <span class="n">HEIGHT_MIN</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Min height&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 42</span><span class="cl">    <span class="n">HEIGHT_MAX</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Max height&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 43</span><span class="cl">
</span></span><span class="line"><span class="ln"> 44</span><span class="cl">    <span class="n">TIP_WIDTH_MIN</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Tip Min Width&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 45</span><span class="cl">    <span class="n">TIP_WIDTH_MAX</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Tip Max Width&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 46</span><span class="cl">
</span></span><span class="line"><span class="ln"> 47</span><span class="cl">    <span class="n">BASE_WIDTH_MIN</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Base Min Width&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 48</span><span class="cl">    <span class="n">BASE_WIDTH_MAX</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Base Max Width&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 49</span><span class="cl">
</span></span><span class="line"><span class="ln"> 50</span><span class="cl">    <span class="n">BASE_ROT_MIN</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Base Rot Min&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 51</span><span class="cl">    <span class="n">BASE_ROT_MAX</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Base Rot Max&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 52</span><span class="cl">
</span></span><span class="line"><span class="ln"> 53</span><span class="cl">    <span class="n">TIP_ROT_MIN</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Tip Rot Min&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 54</span><span class="cl">    <span class="n">TIP_ROT_MAX</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Tip Rot Max&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 55</span><span class="cl">
</span></span><span class="line"><span class="ln"> 56</span><span class="cl">    <span class="n">ROT_FALLOFF</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">props</span><span class="o">.</span><span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&#34;Rotation Falloff&#34;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 57</span><span class="cl">
</span></span><span class="line"><span class="ln"> 58</span><span class="cl">    <span class="nd">@classmethod</span>
</span></span><span class="line"><span class="ln"> 59</span><span class="cl">    <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 60</span><span class="cl">        <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="ln"> 61</span><span class="cl">
</span></span><span class="line"><span class="ln"> 62</span><span class="cl">    
</span></span><span class="line"><span class="ln"> 63</span><span class="cl">
</span></span><span class="line"><span class="ln"> 64</span><span class="cl">    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 65</span><span class="cl">        <span class="n">grass_mesh</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meshes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;grass mesh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 66</span><span class="cl">        <span class="n">grass_object</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;grass object&#34;</span><span class="p">,</span> <span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 67</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">grass_object</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 68</span><span class="cl">
</span></span><span class="line"><span class="ln"> 69</span><span class="cl">        <span class="n">bm</span> <span class="o">=</span> <span class="n">bmesh</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span></span><span class="line"><span class="ln"> 70</span><span class="cl">        <span class="n">bm</span><span class="o">.</span><span class="n">from_mesh</span><span class="p">(</span><span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 71</span><span class="cl">
</span></span><span class="line"><span class="ln"> 72</span><span class="cl">        <span class="n">height</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">HEIGHT_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEIGHT_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 73</span><span class="cl">        <span class="n">tip_width</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TIP_WIDTH_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIP_WIDTH_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 74</span><span class="cl">        <span class="n">base_width</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE_WIDTH_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE_WIDTH_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 75</span><span class="cl">
</span></span><span class="line"><span class="ln"> 76</span><span class="cl">        <span class="n">last_vert_1</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="ln"> 77</span><span class="cl">        <span class="n">last_vert_2</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="ln"> 78</span><span class="cl">
</span></span><span class="line"><span class="ln"> 79</span><span class="cl">        <span class="n">rot_base</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BASE_ROT_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">BASE_ROT_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 80</span><span class="cl">        <span class="n">rot_tip</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TIP_ROT_MIN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIP_ROT_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 81</span><span class="cl">
</span></span><span class="line"><span class="ln"> 82</span><span class="cl">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 83</span><span class="cl">            <span class="n">progress</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">height</span>
</span></span><span class="line"><span class="ln"> 84</span><span class="cl">            <span class="n">pos_x</span> <span class="o">=</span> <span class="n">map_range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">base_width</span><span class="p">,</span> <span class="n">tip_width</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 85</span><span class="cl">            <span class="n">vert_1</span> <span class="o">=</span> <span class="n">bm</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="o">-</span><span class="n">pos_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
</span></span><span class="line"><span class="ln"> 86</span><span class="cl">            <span class="n">vert_2</span> <span class="o">=</span> <span class="n">bm</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="n">pos_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
</span></span><span class="line"><span class="ln"> 87</span><span class="cl">
</span></span><span class="line"><span class="ln"> 88</span><span class="cl">            <span class="n">rot_angle</span> <span class="o">=</span> <span class="n">map_range</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROT_FALLOFF</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rot_base</span><span class="p">,</span> <span class="n">rot_tip</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 89</span><span class="cl">
</span></span><span class="line"><span class="ln"> 90</span><span class="cl">            <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">mathutils</span><span class="o">.</span><span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">rot_angle</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&#34;X&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 91</span><span class="cl">            <span class="n">bmesh</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">bm</span><span class="p">,</span> <span class="n">cent</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">matrix</span><span class="o">=</span><span class="n">rot_matrix</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="p">[</span><span class="n">vert_1</span><span class="p">,</span> <span class="n">vert_2</span><span class="p">])</span>
</span></span><span class="line"><span class="ln"> 92</span><span class="cl">
</span></span><span class="line"><span class="ln"> 93</span><span class="cl">            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 94</span><span class="cl">                <span class="n">bm</span><span class="o">.</span><span class="n">faces</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="n">last_vert_1</span><span class="p">,</span> <span class="n">last_vert_2</span><span class="p">,</span> <span class="n">vert_2</span><span class="p">,</span> <span class="n">vert_1</span><span class="p">))</span>
</span></span><span class="line"><span class="ln"> 95</span><span class="cl">            
</span></span><span class="line"><span class="ln"> 96</span><span class="cl">            <span class="n">last_vert_1</span> <span class="o">=</span> <span class="n">vert_1</span>
</span></span><span class="line"><span class="ln"> 97</span><span class="cl">            <span class="n">last_vert_2</span> <span class="o">=</span> <span class="n">vert_2</span>
</span></span><span class="line"><span class="ln"> 98</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 99</span><span class="cl">        <span class="n">bm</span><span class="o">.</span><span class="n">to_mesh</span><span class="p">(</span><span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">100</span><span class="cl">        <span class="n">bm</span><span class="o">.</span><span class="n">free</span><span class="p">()</span>
</span></span><span class="line"><span class="ln">101</span><span class="cl">
</span></span><span class="line"><span class="ln">102</span><span class="cl">        <span class="k">return</span> <span class="p">{</span><span class="s2">&#34;FINISHED&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="ln">103</span><span class="cl">
</span></span><span class="line"><span class="ln">104</span><span class="cl"><span class="n">register</span><span class="p">,</span> <span class="n">unregister</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_classes_factory</span><span class="p">({</span><span class="n">OT_Mesh_Grassshrub</span><span class="p">})</span>
</span></span></code></pre></div><h1 id="sose21">SoSe21</h1>
<h2 id="vl5-animation---springende-kugel">VL5 Animation - Springende Kugel</h2>
<p><strong>Code-Zwischenstand aus der Vorlesung vom 20.04.21</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kn">import</span> <span class="nn">bpy</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="n">points</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="s2">&#34;points&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">objects</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="n">sphere</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Object</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s2">&#34;Sphere&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="n">JUMP_HEIGHT</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="n">FRAMES_PER_UNIT</span> <span class="o">=</span> <span class="mf">1.5</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="k">def</span> <span class="nf">get_distance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">p2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="k">def</span> <span class="nf">set_handle_types</span><span class="p">():</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">    <span class="k">for</span> <span class="n">c_curve</span> <span class="ow">in</span> <span class="n">sphere</span><span class="o">.</span><span class="n">animation_data</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">fcurves</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c_keyframe</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">c_curve</span><span class="o">.</span><span class="n">keyframe_points</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">                <span class="n">c_keyframe</span><span class="o">.</span><span class="n">handle_left_type</span> <span class="o">=</span> <span class="s2">&#34;VECTOR&#34;</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">                <span class="n">c_keyframe</span><span class="o">.</span><span class="n">handle_right_type</span> <span class="o">=</span> <span class="s2">&#34;VECTOR&#34;</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">        <span class="n">c_curve</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="n">sphere</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="n">sphere</span><span class="o">.</span><span class="n">keyframe_insert</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s2">&#34;location&#34;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">
</span></span><span class="line"><span class="ln">27</span><span class="cl"><span class="n">at_keyframe</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">
</span></span><span class="line"><span class="ln">30</span><span class="cl">    <span class="n">distance_to_last_point</span> <span class="o">=</span> <span class="n">get_distance</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">    <span class="n">keyframe_loc</span> <span class="o">=</span> <span class="n">at_keyframe</span> <span class="o">+</span> <span class="n">distance_to_last_point</span> <span class="o">*</span> <span class="n">FRAMES_PER_UNIT</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">    <span class="n">intermediate_keyframe_location</span> <span class="o">=</span> <span class="n">at_keyframe</span> <span class="o">+</span> <span class="p">(</span><span class="n">distance_to_last_point</span> <span class="o">*</span> <span class="n">FRAMES_PER_UNIT</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span></span><span class="line"><span class="ln">33</span><span class="cl">
</span></span><span class="line"><span class="ln">34</span><span class="cl">    <span class="n">at_keyframe</span> <span class="o">=</span> <span class="n">keyframe_loc</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">
</span></span><span class="line"><span class="ln">36</span><span class="cl">    <span class="n">sphere</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">location</span>
</span></span><span class="line"><span class="ln">37</span><span class="cl">    <span class="n">sphere</span><span class="o">.</span><span class="n">keyframe_insert</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s2">&#34;location&#34;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">keyframe_loc</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">
</span></span><span class="line"><span class="ln">39</span><span class="cl">    <span class="n">intermediate_point</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">location</span> <span class="o">+</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">location</span> <span class="o">/</span> <span class="mi">2</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">    <span class="n">intermediate_point</span><span class="o">.</span><span class="n">z</span> <span class="o">+=</span> <span class="n">JUMP_HEIGHT</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">
</span></span><span class="line"><span class="ln">42</span><span class="cl">    <span class="n">sphere</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">intermediate_point</span>
</span></span><span class="line"><span class="ln">43</span><span class="cl">    <span class="n">sphere</span><span class="o">.</span><span class="n">keyframe_insert</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s2">&#34;location&#34;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">intermediate_keyframe_location</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">44</span><span class="cl">
</span></span><span class="line"><span class="ln">45</span><span class="cl">    <span class="n">set_handle_types</span><span class="p">()</span>
</span></span></code></pre></div><h2 id="vl4-meshgenerierung---graßbüschel">VL4 Meshgenerierung - Graßbüschel</h2>
<p><strong>Code-Zwischenstand aus der Vorlesung vom 14.04.21</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kn">import</span> <span class="nn">bpy</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="kn">import</span> <span class="nn">bmesh</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="kn">import</span> <span class="nn">mathutils</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="n">BLADES</span> <span class="o">=</span> <span class="mi">8</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="n">WIDTH_MAX</span> <span class="o">=</span> <span class="mf">0.6</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="n">WIDTH_MIN</span> <span class="o">=</span> <span class="mf">0.03</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="n">HEIGHT_MIN</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="n">HEIGHT_MAX</span> <span class="o">=</span> <span class="mi">12</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="n">ROT_BASE_MIN</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="n">ROT_BASE_MAX</span> <span class="o">=</span> <span class="mi">25</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="n">ROT_TIP_MIN</span> <span class="o">=</span> <span class="mi">30</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="n">ROT_TIP_MAX</span> <span class="o">=</span> <span class="mi">90</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="n">ROT_FALLOFF</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"># Szene leeren</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;SELECT&#39;</span><span class="p">)</span> <span class="c1"># selektiert alle Objekte</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">use_global</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># löscht selektierte objekte</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">outliner</span><span class="o">.</span><span class="n">orphans_purge</span><span class="p">()</span> <span class="c1"># löscht überbleibende Meshdaten etc.</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">
</span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="c1"># Mesh und Objekt erstellen</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl"><span class="n">grass_mesh</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meshes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;grass_shrub_mesh&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="n">grass_object</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;grass shrub&#34;</span><span class="p">,</span> <span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">
</span></span><span class="line"><span class="ln">30</span><span class="cl"><span class="c1"># Mesh in aktuelle Collection der Szene verlinken</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">grass_object</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">
</span></span><span class="line"><span class="ln">33</span><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="ln">34</span><span class="cl"><span class="n">bm</span> <span class="o">=</span> <span class="n">bmesh</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl"><span class="n">bm</span><span class="o">.</span><span class="n">from_mesh</span><span class="p">(</span><span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">
</span></span><span class="line"><span class="ln">37</span><span class="cl"><span class="k">def</span> <span class="nf">map_range</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">from_min</span><span class="p">,</span> <span class="n">from_max</span><span class="p">,</span> <span class="n">to_min</span><span class="p">,</span> <span class="n">to_max</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">    <span class="s2">&#34;&#34;&#34;Bringt einen Wert v von einer Skala (from_min, from_max) auf eine neue Skala (to_min, to_max)&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">    <span class="k">return</span> <span class="n">to_min</span> <span class="o">+</span> <span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">from_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">to_max</span> <span class="o">-</span> <span class="n">to_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">from_max</span> <span class="o">-</span> <span class="n">from_min</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">
</span></span><span class="line"><span class="ln">41</span><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BLADES</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">
</span></span><span class="line"><span class="ln">43</span><span class="cl">    <span class="c1"># Zufällige Werte für jedes Blatt generieren</span>
</span></span><span class="line"><span class="ln">44</span><span class="cl">    <span class="n">c_height</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">HEIGHT_MIN</span><span class="p">,</span> <span class="n">HEIGHT_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">    <span class="n">c_blade</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="ln">46</span><span class="cl">
</span></span><span class="line"><span class="ln">47</span><span class="cl">    <span class="n">c_rot_base</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">ROT_BASE_MIN</span><span class="p">,</span> <span class="n">ROT_BASE_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">48</span><span class="cl">    <span class="n">c_rot_tip</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">ROT_TIP_MIN</span><span class="p">,</span> <span class="n">ROT_TIP_MAX</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">49</span><span class="cl">
</span></span><span class="line"><span class="ln">50</span><span class="cl">    <span class="n">last_vert_1</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="ln">51</span><span class="cl">    <span class="n">last_vert_2</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">
</span></span><span class="line"><span class="ln">53</span><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_height</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">54</span><span class="cl">        <span class="n">progress</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">c_height</span>
</span></span><span class="line"><span class="ln">55</span><span class="cl">
</span></span><span class="line"><span class="ln">56</span><span class="cl">        <span class="n">v</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">57</span><span class="cl">
</span></span><span class="line"><span class="ln">58</span><span class="cl">        <span class="n">pos_x</span> <span class="o">=</span> <span class="n">map_range</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">WIDTH_MAX</span><span class="p">,</span> <span class="n">WIDTH_MIN</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">59</span><span class="cl">        
</span></span><span class="line"><span class="ln">60</span><span class="cl">        <span class="n">vert_1</span> <span class="o">=</span> <span class="n">bm</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="o">-</span><span class="n">pos_x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">61</span><span class="cl">        <span class="n">vert_2</span> <span class="o">=</span> <span class="n">bm</span><span class="o">.</span><span class="n">verts</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="n">pos_x</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">62</span><span class="cl">
</span></span><span class="line"><span class="ln">63</span><span class="cl">        <span class="c1"># Halm immer weiter biegen desto weiter oben wir uns im Mesh/Loop befinden</span>
</span></span><span class="line"><span class="ln">64</span><span class="cl">        <span class="n">rot_angle</span> <span class="o">=</span> <span class="n">map_range</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="n">ROT_FALLOFF</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c_rot_base</span><span class="p">,</span> <span class="n">c_rot_tip</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">65</span><span class="cl">        <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">mathutils</span><span class="o">.</span><span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">rot_angle</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">66</span><span class="cl">        <span class="n">bmesh</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">bm</span><span class="p">,</span> <span class="n">cent</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">matrix</span><span class="o">=</span><span class="n">rot_matrix</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="p">[</span><span class="n">vert_1</span><span class="p">,</span> <span class="n">vert_2</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">67</span><span class="cl">        
</span></span><span class="line"><span class="ln">68</span><span class="cl">        <span class="c1"># Generierung des Polygons in erster Stufe überspringen (weil bisher nur 2 Verices bestehen)</span>
</span></span><span class="line"><span class="ln">69</span><span class="cl">        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">70</span><span class="cl">            <span class="n">bm</span><span class="o">.</span><span class="n">faces</span><span class="o">.</span><span class="n">new</span><span class="p">((</span><span class="n">last_vert_1</span><span class="p">,</span><span class="n">last_vert_2</span><span class="p">,</span><span class="n">vert_2</span><span class="p">,</span><span class="n">vert_1</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">71</span><span class="cl">            
</span></span><span class="line"><span class="ln">72</span><span class="cl">        <span class="c1"># Vertices der Vertices-Liste des aktuellen Halms hinzufügen</span>
</span></span><span class="line"><span class="ln">73</span><span class="cl">        <span class="n">c_blade</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vert_1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">74</span><span class="cl">        <span class="n">c_blade</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vert_2</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">75</span><span class="cl">
</span></span><span class="line"><span class="ln">76</span><span class="cl">        <span class="c1"># Letzte Vertices speichern, um sie für die generierung des nächsten Polygons zu verwenden</span>
</span></span><span class="line"><span class="ln">77</span><span class="cl">        <span class="n">last_vert_1</span> <span class="o">=</span> <span class="n">vert_1</span>
</span></span><span class="line"><span class="ln">78</span><span class="cl">        <span class="n">last_vert_2</span> <span class="o">=</span> <span class="n">vert_2</span>
</span></span><span class="line"><span class="ln">79</span><span class="cl">
</span></span><span class="line"><span class="ln">80</span><span class="cl">    <span class="c1"># Jeden Halm zufällig auf Z Achse rotieren</span>
</span></span><span class="line"><span class="ln">81</span><span class="cl">    <span class="n">random_angle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">82</span><span class="cl">    <span class="n">rot_matrix_blade</span> <span class="o">=</span> <span class="n">mathutils</span><span class="o">.</span><span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">random_angle</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">83</span><span class="cl">
</span></span><span class="line"><span class="ln">84</span><span class="cl">    <span class="c1"># Dabei jeden Vertex des aktuellen Halms rotieren</span>
</span></span><span class="line"><span class="ln">85</span><span class="cl">    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c_blade</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">86</span><span class="cl">        <span class="n">bmesh</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">bm</span><span class="p">,</span> <span class="n">cent</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">matrix</span><span class="o">=</span><span class="n">rot_matrix_blade</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">87</span><span class="cl">
</span></span><span class="line"><span class="ln">88</span><span class="cl"><span class="c1"># BMesh auf Mesh anwenden und abschließen</span>
</span></span><span class="line"><span class="ln">89</span><span class="cl"><span class="n">bm</span><span class="o">.</span><span class="n">to_mesh</span><span class="p">(</span><span class="n">grass_mesh</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">90</span><span class="cl"><span class="n">bm</span><span class="o">.</span><span class="n">free</span><span class="p">()</span>
</span></span></code></pre></div><h2 id="vl2-turmgenerator">VL2 Turmgenerator</h2>
<p><strong>Code-Zwischenstand aus der Vorlesung am 23.03.21</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">  1</span><span class="cl"><span class="kn">import</span> <span class="nn">bpy</span>
</span></span><span class="line"><span class="ln">  2</span><span class="cl"><span class="kn">import</span> <span class="nn">typing</span>
</span></span><span class="line"><span class="ln">  3</span><span class="cl"><span class="kn">import</span> <span class="nn">math</span>
</span></span><span class="line"><span class="ln">  4</span><span class="cl">
</span></span><span class="line"><span class="ln">  5</span><span class="cl"><span class="k">class</span> <span class="nc">tower</span><span class="p">():</span>
</span></span><span class="line"><span class="ln">  6</span><span class="cl">    <span class="n">tower_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="ln">  7</span><span class="cl">    <span class="n">tower_height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">8</span>
</span></span><span class="line"><span class="ln">  8</span><span class="cl">    <span class="n">roof_height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.5</span>
</span></span><span class="line"><span class="ln">  9</span><span class="cl">    <span class="n">roof_overhang</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="ln"> 10</span><span class="cl">
</span></span><span class="line"><span class="ln"> 11</span><span class="cl">    <span class="n">windows_num_circular</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="ln"> 12</span><span class="cl">    <span class="n">windows_num_vertical</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="ln"> 13</span><span class="cl">    <span class="n">windows_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="ln"> 14</span><span class="cl">    <span class="n">wall_thickness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="ln"> 15</span><span class="cl">
</span></span><span class="line"><span class="ln"> 16</span><span class="cl">    <span class="n">PI2</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">2</span>
</span></span><span class="line"><span class="ln"> 17</span><span class="cl">
</span></span><span class="line"><span class="ln"> 18</span><span class="cl">    <span class="k">def</span> <span class="nf">generate_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 19</span><span class="cl">
</span></span><span class="line"><span class="ln"> 20</span><span class="cl">
</span></span><span class="line"><span class="ln"> 21</span><span class="cl">        <span class="n">windows</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="ln"> 22</span><span class="cl">
</span></span><span class="line"><span class="ln"> 23</span><span class="cl">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">windows_num_circular</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 24</span><span class="cl">            <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">primitive_cube_add</span><span class="p">(</span>
</span></span><span class="line"><span class="ln"> 25</span><span class="cl">                <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">windows_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_size</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 26</span><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="ln"> 27</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 28</span><span class="cl">            <span class="n">c_window</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span>
</span></span><span class="line"><span class="ln"> 29</span><span class="cl">
</span></span><span class="line"><span class="ln"> 30</span><span class="cl">            <span class="n">c_window</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="ln"> 31</span><span class="cl">                <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_num_circular</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">PI2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_radius</span><span class="p">),</span>
</span></span><span class="line"><span class="ln"> 32</span><span class="cl">                <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_num_circular</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">PI2</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_radius</span><span class="p">),</span>
</span></span><span class="line"><span class="ln"> 33</span><span class="cl">                <span class="mi">1</span>
</span></span><span class="line"><span class="ln"> 34</span><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="ln"> 35</span><span class="cl">
</span></span><span class="line"><span class="ln"> 36</span><span class="cl">            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 37</span><span class="cl">                <span class="n">c_window</span><span class="o">.</span><span class="n">rotation_euler</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PI2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_num_circular</span>
</span></span><span class="line"><span class="ln"> 38</span><span class="cl">
</span></span><span class="line"><span class="ln"> 39</span><span class="cl">            <span class="n">windows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_window</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 40</span><span class="cl">
</span></span><span class="line"><span class="ln"> 41</span><span class="cl">        <span class="k">for</span> <span class="n">c_window</span> <span class="ow">in</span> <span class="n">windows</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 42</span><span class="cl">            <span class="n">c_window</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 43</span><span class="cl">
</span></span><span class="line"><span class="ln"> 44</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span></span><span class="line"><span class="ln"> 45</span><span class="cl">
</span></span><span class="line"><span class="ln"> 46</span><span class="cl">        <span class="n">window</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span>
</span></span><span class="line"><span class="ln"> 47</span><span class="cl">        <span class="n">modifier_array</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Window Array&#34;</span><span class="p">,</span> <span class="s2">&#34;ARRAY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 48</span><span class="cl">        <span class="n">modifier_array</span><span class="o">.</span><span class="n">use_relative_offset</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="ln"> 49</span><span class="cl">        <span class="n">modifier_array</span><span class="o">.</span><span class="n">use_constant_offset</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="ln"> 50</span><span class="cl">        <span class="n">modifier_array</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows_num_vertical</span>
</span></span><span class="line"><span class="ln"> 51</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 52</span><span class="cl">        <span class="n">modifier_array</span><span class="o">.</span><span class="n">constant_offset_displace</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 53</span><span class="cl">
</span></span><span class="line"><span class="ln"> 54</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">display_type</span> <span class="o">=</span> <span class="s1">&#39;WIRE&#39;</span>
</span></span><span class="line"><span class="ln"> 55</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 56</span><span class="cl">        <span class="k">return</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span>
</span></span><span class="line"><span class="ln"> 57</span><span class="cl">
</span></span><span class="line"><span class="ln"> 58</span><span class="cl">
</span></span><span class="line"><span class="ln"> 59</span><span class="cl">    <span class="k">def</span> <span class="nf">create_roof_material</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Material</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 60</span><span class="cl">        <span class="n">mat_roof</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Material</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Roof Material&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 61</span><span class="cl">        <span class="n">mat_roof</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="ln"> 62</span><span class="cl">        <span class="n">nodes_roof</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="n">mat_roof</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
</span></span><span class="line"><span class="ln"> 63</span><span class="cl">        <span class="n">nodes_roof</span><span class="p">[</span><span class="s2">&#34;Principled BSDF&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.103312</span><span class="p">,</span> <span class="mf">0.236954</span><span class="p">,</span> <span class="mf">0.177671</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">]</span>
</span></span><span class="line"><span class="ln"> 64</span><span class="cl">
</span></span><span class="line"><span class="ln"> 65</span><span class="cl">        <span class="k">return</span> <span class="n">mat_roof</span>
</span></span><span class="line"><span class="ln"> 66</span><span class="cl">
</span></span><span class="line"><span class="ln"> 67</span><span class="cl">    <span class="k">def</span> <span class="nf">create_tower_material</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Material</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 68</span><span class="cl">        <span class="n">mat_tower</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Material</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Tower Material&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 69</span><span class="cl">
</span></span><span class="line"><span class="ln"> 70</span><span class="cl">        <span class="n">mat_tower</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="ln"> 71</span><span class="cl">
</span></span><span class="line"><span class="ln"> 72</span><span class="cl">        <span class="n">nodes_tower</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
</span></span><span class="line"><span class="ln"> 73</span><span class="cl">        <span class="n">node_bricks</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="n">nodes_tower</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;ShaderNodeTexBrick&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 74</span><span class="cl">        <span class="n">node_coords</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="n">nodes_tower</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;ShaderNodeTexCoord&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 75</span><span class="cl">
</span></span><span class="line"><span class="ln"> 76</span><span class="cl">        <span class="n">node_bricks</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 77</span><span class="cl">        <span class="n">node_bricks</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="ln"> 78</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 79</span><span class="cl">        <span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">node_bricks</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nodes_tower</span><span class="p">[</span><span class="s2">&#34;Principled BSDF&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="ln"> 80</span><span class="cl">        <span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">node_coords</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">node_bricks</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="ln"> 81</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 82</span><span class="cl">        <span class="k">return</span> <span class="n">mat_tower</span>
</span></span><span class="line"><span class="ln"> 83</span><span class="cl">
</span></span><span class="line"><span class="ln"> 84</span><span class="cl">    <span class="k">def</span> <span class="nf">generate_tower</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 85</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">primitive_cylinder_add</span><span class="p">(</span>
</span></span><span class="line"><span class="ln"> 86</span><span class="cl">            <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> 
</span></span><span class="line"><span class="ln"> 87</span><span class="cl">            <span class="n">depth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tower_height</span><span class="p">,</span> 
</span></span><span class="line"><span class="ln"> 88</span><span class="cl">            <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tower_radius</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 89</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 90</span><span class="cl">        <span class="n">tower_base</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span>
</span></span><span class="line"><span class="ln"> 91</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 92</span><span class="cl">        
</span></span><span class="line"><span class="ln"> 93</span><span class="cl">
</span></span><span class="line"><span class="ln"> 94</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_tower_material</span><span class="p">())</span>
</span></span><span class="line"><span class="ln"> 95</span><span class="cl">
</span></span><span class="line"><span class="ln"> 96</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">primitive_cone_add</span><span class="p">(</span>
</span></span><span class="line"><span class="ln"> 97</span><span class="cl">            <span class="n">depth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">roof_height</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 98</span><span class="cl">            <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tower_height</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
</span></span><span class="line"><span class="ln"> 99</span><span class="cl">            <span class="n">radius1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tower_radius</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof_overhang</span>
</span></span><span class="line"><span class="ln">100</span><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="ln">101</span><span class="cl">
</span></span><span class="line"><span class="ln">102</span><span class="cl">        <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_roof_material</span><span class="p">())</span>
</span></span><span class="line"><span class="ln">103</span><span class="cl">
</span></span><span class="line"><span class="ln">104</span><span class="cl">        <span class="n">windows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_windows</span><span class="p">()</span>
</span></span><span class="line"><span class="ln">105</span><span class="cl">
</span></span><span class="line"><span class="ln">106</span><span class="cl">        <span class="n">modifier_solidify</span> <span class="o">=</span> <span class="n">tower_base</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Wall Thickness&#34;</span><span class="p">,</span> <span class="s2">&#34;SOLIDIFY&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">107</span><span class="cl">        <span class="n">modifier_solidify</span><span class="o">.</span><span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wall_thickness</span>
</span></span><span class="line"><span class="ln">108</span><span class="cl">        
</span></span><span class="line"><span class="ln">109</span><span class="cl">        <span class="n">modifier_bool</span> <span class="o">=</span> <span class="n">tower_base</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Window Bool&#34;</span><span class="p">,</span> <span class="s2">&#34;BOOLEAN&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">110</span><span class="cl">        <span class="n">modifier_bool</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">windows</span>
</span></span><span class="line"><span class="ln">111</span><span class="cl">
</span></span><span class="line"><span class="ln">112</span><span class="cl">
</span></span><span class="line"><span class="ln">113</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;SELECT&#39;</span><span class="p">)</span> <span class="c1"># selektiert alle Objekte</span>
</span></span><span class="line"><span class="ln">114</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">use_global</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># löscht selektierte objekte</span>
</span></span><span class="line"><span class="ln">115</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">outliner</span><span class="o">.</span><span class="n">orphans_purge</span><span class="p">()</span> <span class="c1"># löscht überbleibende Meshdaten etc.</span>
</span></span><span class="line"><span class="ln">116</span><span class="cl">
</span></span><span class="line"><span class="ln">117</span><span class="cl"><span class="n">t</span> <span class="o">=</span> <span class="n">tower</span><span class="p">()</span>
</span></span><span class="line"><span class="ln">118</span><span class="cl"><span class="n">t</span><span class="o">.</span><span class="n">generate_tower</span><span class="p">()</span>
</span></span></code></pre></div>

			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/python-style-guide/" title="Python Style Guide">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Python Style Guide
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/links/" title="Links &amp; Literatur">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Links &amp; Literatur
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://simonstorlschulke.github.io/Datenverarbeitung-in-der-Medienproduktion/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>


