<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="de"><script src="/cg-mib/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=cg-mib/livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Übung 2 - Blender API &amp; Visual Studio Code - Computergrafik MIB</title>

    
    <meta name="description" content="Online-Material zur Veranstaltung Computergrafik MIB.">
    
    <link rel="canonical" href="http://localhost:1313/cg-mib/chapter02/exercise01_a/">
    

    <meta property="og:url" content="http://localhost:1313/cg-mib/chapter02/exercise01_a/">
    <meta property="og:title" content="Computergrafik MIB">
    <meta property="og:image" content="http://localhost:1313/cg-mib/images/lecture_logo_dvmp.png">
    <meta name="apple-mobile-web-app-title" content="Computergrafik MIB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://localhost:1313/cg-mib/images/lecture_icon.png">
    <link rel="icon" type="image/x-icon" href="http://localhost:1313/cg-mib/images/lecture_icon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://localhost:1313/cg-mib/fonts/icon.eot?52m981');
        src: url('http://localhost:1313/cg-mib/fonts/icon.eot#iefix52m981')
               format('embedded-opentype'),
             url('http://localhost:1313/cg-mib/fonts/icon.woff?52m981')
               format('woff'),
             url('http://localhost:1313/cg-mib/fonts/icon.ttf?52m981')
               format('truetype'),
             url('http://localhost:1313/cg-mib/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://localhost:1313/cg-mib/stylesheets/application.css">
    <link rel="stylesheet" href="http://localhost:1313/cg-mib/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://localhost:1313/cg-mib/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://localhost:1313/cg-mib/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="http://localhost:1313/cg-mib/stylesheets/custom.css">
    
    <script src="http://localhost:1313/cg-mib/javascripts/modernizr.js"></script>


  </head>
  <body class="palette-primary-indigo palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Übung 2 - Blender API &amp; Visual Studio Code
      </div>
    </div>

    

    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://localhost:1313/cg-mib//general" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://localhost:1313/cg-mib/images/lecture_logo_dvmp.png">
        </div>
      
      <div class="name">
        <strong>Computergrafik MIB </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Allgemeines</span>
    <ul>
      
        
        



<a  title="Kursinfo" href="http://localhost:1313/cg-mib/general/">
	
	Kursinfo
</a>



      
        
        



<a  title="Links &amp; Literatur" href="http://localhost:1313/cg-mib/links/">
	
	Links &amp; Literatur
</a>



      
        
        



<a  title="Vorlesungs Pythonscripts" href="http://localhost:1313/cg-mib/course-python-scripts/">
	
	Vorlesungs Pythonscripts
</a>



      
    </ul>
  
</li>



<li>
  
    <span class="section">Kapitel</span>
    <ul>
      
        
        



<a  title="1. Datenstrukturen in 3D &amp; Godot Basics" href="http://localhost:1313/cg-mib/chapter01/exercise01_a/">
	
	1. Datenstrukturen in 3D &amp; Godot Basics
</a>



      
        
        



<a class="current" title="2. Python &amp; Blender API" href="http://localhost:1313/cg-mib/chapter02/exercise01_a/">
	
	2. Python &amp; Blender API
</a>


<ul id="scrollspy">
</ul>


      
        
        



<a  title="3. Operatoren &amp; Addons" href="http://localhost:1313/cg-mib/chapter03/exercise01_a/">
	
	3. Operatoren &amp; Addons
</a>



      
        
        



<a  title="4. Meshgenerierung" href="http://localhost:1313/cg-mib/chapter04/exercise01_a/">
	
	4. Meshgenerierung
</a>



      
        
        



<a  title="5. Animation" href="http://localhost:1313/cg-mib/chapter05/exercise01_a/">
	
	5. Animation
</a>



      
        
        



<a  title="6. Assetgenerierung" href="http://localhost:1313/cg-mib/chapter06/exercise01_a/">
	
	6. Assetgenerierung
</a>



      
        
        



<a  title="7. UI" href="http://localhost:1313/cg-mib/chapter07/exercise01_a/">
	
	7. UI
</a>



      
    </ul>
  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Übung 2 - Blender API &amp; Visual Studio Code </h1>

			<div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 60%"><p>Wenn Scripting-Projekte komplexer werden, wird es irgendwann sehr unpraktisch, nur den Blender-internen Texteditor einzusetzen. Zu diesem Zweck werden wir uns in dieser Übung die Entwicklung mit der IDE Visual Studio Code erleichtern.</p>
<p>Zudem werden wir die verschieden Untermodule der Blender API kennenlernen, um einen Burgturm-Generator zu programmieren.</p>
</div>
<div class="tcl-column tcl-right" style="width: 40%"><img src="img/thumbnail.png" alt="thumbnail"></div>
</div>
<h2 id="visual-studio-code">Visual Studio Code</h2>
<blockquote class="todo">
    <ul>
<li>Installiert zunächst <a href="https://code.visualstudio.com/">Visual Studio Code</a>.</li>
<li>Installiert Python 3.7</li>
<li>Download für Windows <a href="https://www.python.org/downloads/release/python-379/">hier</a>
<ul>
<li>Bei der Option, ob Python zum PATH hinzugefügt werden soll, wählt <strong>JA</strong> - Neustart evtl. erforderlich</li>
</ul>
</li>
<li>Mit Linux (Ubuntu basierte Distributionen) im Terminal mit <code>sudo apt-get install python3.7</code></li>
<li>öffnet VS Code und installiert die beiden Extensions <strong>Python</strong> von Microsoft und <strong>Blender Development</strong> von Jacques Lucke.</li>
</ul>
<p><img src="img/extensions.png" alt="python-extension"></p>
<ul>
<li>Öffnet nun ein Terminal in VS Code (<strong>Teminal → New Terminal</strong>)</li>
<li>Installiert das fake-bpy-module mit <code>pip install fake-bpy-module-2.90</code> (bzw aktuelle Blender Version). Dieses ermöglicht uns Autovervollständigung etc. für die Blender API.</li>
<li>Wenn ihr nun mi VS Code eine Datei als .py abspeichert und bpy importiert, sollte es keine Fehlermeldungen geben und Autovervollständigung sollte funktionieren.
<ul>
<li>Unten links in VS Code kann (bei offener .py Datei) der Python Interpreter selektiert werden. Wählt hier eure Python 3.7 Version.</li>
</ul>
</li>
</ul>
<p><video width="75%" autoplay loop src="img/fake-bpy-module.mp4"></video></p>

</blockquote>
<h2 id="das-blender-python-modul-bpy">Das Blender-Python-Modul <code>bpy</code></h2>
<p>Wie in anderen Programmiersprachen auch, lassen sich in Python Bibliotheken anlegen, die abrufbare Funktionalität in vordefinierten Klassen und Methoden (Funktionen) bereit halten. Diese heißen in Python <em>Module</em>. Um in Python-Skripten für Blender auf die von Blender vorgehaltene Funktionalität zugreifen zu können, steht in Blender-Python-Skripten das Modul <code>bpy</code> (Abk. f. <em>Blender Python</em>) zur Verfügung.</p>
<p>In Blender-Skripten muss dieses Modul wie jedes andere Modul auch zunächst mit einer <code>import</code>-Anweisung eingebunden werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript" data-lang="gdscript"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kd">func</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">param3</span><span class="p">):</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="kd">const</span> <span class="n">local_const</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    <span class="c1"># Syntax HL Test</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="k">if</span> <span class="n">param1</span> <span class="o">&lt;</span> <span class="n">local_const</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">param1</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="k">elif</span> <span class="n">param2</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">param2</span><span class="p">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Fail!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">
</span></span><span class="line"><span class="ln">15</span><span class="cl">    <span class="k">while</span> <span class="n">param2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">        <span class="n">param2</span> <span class="o">-=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="k">match</span> <span class="n">param3</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">        <span class="mi">3</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;param3 is 3!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">        <span class="n">_</span><span class="p">:</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;param3 is not 3!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">
</span></span><span class="line"><span class="ln">24</span><span class="cl">    <span class="kd">var</span> <span class="n">local_var</span> <span class="o">=</span> <span class="n">param1</span> <span class="o">+</span> <span class="mi">3</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">    <span class="k">return</span> <span class="n">local_var</span></span></span></code></pre></div>
<p>Wird die in Blender eingebaute interaktive Python-Konsole verwendet, ist dies automatisch schon geschehen, d.h. es kann direkt auf alles, was <code>bpy</code> bietet, zugegriffen werden.</p>
<h3 id="aufteilung">Aufteilung</h3>
<p>Das Modul <code>bpy</code> bietet die gesamte skript-bare Blender-Funktionalität in acht &ldquo;Unterebenen&rdquo; an.</p>
<blockquote class="todo">
    <ul>
<li>Gebt auf der Blender-Python-Console nur <code>bpy.</code> ein und drückt dann <code>Strg</code>-<code>Leertaste</code>, bzw. den Button &ldquo;Autocomplete&rdquo;</li>
<li>Es werden die acht möglichen &ldquo;Unterebenen&rdquo; angezeigt.</li>
</ul>

</blockquote>
<p>Von diesen acht Gruppen unterhalb von <code>bpy</code> sollen hier die folgenden drei näher betrachtet werden:</p>
<ul>
<li><code>bpy.ops</code></li>
<li><code>bpy.context</code></li>
<li><code>bpy.data</code></li>
<li><code>bpy.types</code></li>
</ul>
<h2 id="die-wichtigsten-untermodule-von-bpy">Die wichtigsten &ldquo;Untermodule&rdquo; von <code>bpy</code></h2>
<h3 id="bpycontext-hahahugoshortcode3s4hbhb"><code>bpy.context</code> <a href="https://docs.blender.org/api/current/bpy.context.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p>Klassen und Methoden unterhalb von <code>bpy.context</code> erlauben den Zugriff auf den aktuellen Kontext, in dem sich der Benutzer befindet wie z.B. Szene, Modus, Selektierte Objekte, Faces, Kanten u. Vertices.</p>
<hr>
<h3 id="bpydata-hahahugoshortcode3s5hbhb"><code>bpy.data</code> <a href="https://docs.blender.org/api/current/bpy.data.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p><code>bpy.data</code> ermöglicht den Zugriff auf die interne Datenstruktur der gerade in Blender geöffneten Datei. Letztendlich wird hier das &ldquo;.blend&rdquo;-Datenformat abgebildet. Auf alles, was in einer .blend-Datei enthalten ist, kann mit  <code>bpy.data</code> Zugegriffen werden. Einen Überblick darüber, was das ist, liefert die <em>Blender File</em> Ansicht des Outliners.
Python-Kommandos aus den Tool-Tips, die über Benutzerschnitsstellenelemente von Blender Zugriff auf Daten der Szene ermöglichen, sind meistens über <code>bpy.data</code>.</p>
<p>Ein typischer Anwendungsfall ist zum Beispiel der Zugriff auf Materialien. Dieser erfolgt mit</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="s2">&#34;materialname&#34;</span><span class="p">]</span>
</span></span></code></pre></div><blockquote class="info">
    <div class="tcl-row">
<div class="tcl-column tcl-left" style="width: 60%"><p>Oft sind Daten über verschiedene Pfade abrufbar. So sind zum Beispiel die <a href="https://docs.blender.org/manual/en/latest/render/cameras.html">Kameradaten</a> hier entweder über den Aufruf der Liste mit allen Kameradaten der Blender-Datei möglich <span class="counter">1</span></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">cameras</span><span class="p">[</span><span class="s2">&#34;My_Cam_Data&#34;</span><span class="p">]</span>
</span></span></code></pre></div><p><strong>oder</strong> über die <a href="https://docs.blender.org/manual/en/latest/scene_layout/collections/collections.html">Collection</a>, welche das Kameraobjekt <em>My_Cam_Object</em> und die ihm zugewiesenen Kameradaten beinhaltet <span class="counter">2</span></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="s2">&#34;Collection&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s2">&#34;My_Cam_Object&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
</span></span></code></pre></div></div>
<div class="tcl-column tcl-right" style="width: 40%"><br>
<p><img src="img/bpydata.png" alt="bpy data"></p></div>
</div>
<p>Zu beachten ist hier, dass <em>My_Cam_Object</em> nicht dasselbe ist wie <em>My_Cam_Data</em>. Ersteres ist das generische Blender-Objekt - z.b. mit dessen Transformation. Letzteres sind die ihm zugewiesenen Kameradaten - z.b. mit Brennweite und Tiefenunschärfe.</p>

</blockquote>
<hr>
<h3 id="bpyops-hahahugoshortcode3s7hbhb"><code>bpy.ops</code> <a href="https://docs.blender.org/api/current/bpy.ops.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p><code>bpy.ops</code> steht für <strong>&ldquo;Operatoren&rdquo;</strong>. Hierunter verbergen sich die Kommandos, die über Tastenkombinationen oder Menüeinträge eingegeben werden können. Die Kommandos, die im Arbeitsbereich des Info-Editors angezeigt werden, stammen meistens aus <code>bpy.ops</code>.</p>
<p>Zu beachten ist hierbei, dass mach jedem Aufruf eines Operator ein Szenenupdate gemacht wird. In Performancerelevanten Code sollten diese daher sparsam verwendet werden. So kann beispielsweise ein Objekt entweder über den Transform-Operator verschoben,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</span></span></code></pre></div><p>oder dessen Position im Raum direkt angesprochen werden:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1">#bzw nach import von mathutils mit </span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">location</span> <span class="o">+=</span> <span class="n">mathutils</span><span class="o">.</span><span class="n">Vector</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</span></span></code></pre></div><h3 id="bpytypes-hahahugoshortcode3s8hbhb"><code>bpy.types</code> <a href="https://docs.blender.org/api/current/bpy.types.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p>Dieses Modul enthält Blenders interne Datentypen wie z.b. Objekte, Materialien, Nodes etc. Es kann z.B. für Type Hinting eingesetzt werden.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">my_material</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Material</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;My Material&#34;</span><span class="p">)</span>
</span></span></code></pre></div><h2 id="andere-mitgelieferte-module">Andere mitgelieferte Module</h2>
<p>Neben <code>bpy</code> werden auch noch andere Python-Module mit Blender mitgeliefert. Die für uns hier Wichtigen sind Folgende:</p>
<h3 id="mathutils-hahahugoshortcode3s9hbhb"><code>mathutils</code> <a href="https://docs.blender.org/api/current/mathutils.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p>Hier sind u.a. wichtige Typen für das Scripting in Blender und deren Methoden enthalten (<code>Color</code>, <code>Euler</code>, <code>Matrix</code>, <code>Quaternion</code>, <code>Vector</code>)</p>
<hr>
<h3 id="bmesh-hahahugoshortcode3s10hbhb"><code>bmesh</code> <a href="https://docs.blender.org/api/current/bmesh.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p>Gibt Zugriff auf Blenders interne Mesh-Editing API.</p>
<hr>
<h3 id="gpu-hahahugoshortcode3s11hbhb"><code>gpu</code> <a href="https://docs.blender.org/api/current/gpu.html" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a></h3>
<p>Ermöglicht u.a. das Zeichnen von selbstdefinierten Shadern im Viewport.</p>
<h2 id="aufgabe---burgturm-generator">Aufgabe - Burgturm Generator</h2>
<p>Nun wollen wir die verschiedenen bpy Module einsetzen, um einen Burgturm bestehend aus einem <strong>Cylinder</strong> und einem <strong>Cone</strong> zu generieren</p>
<blockquote class="todo">
    <h3 id="grundform-generieren">Grundform generieren</h3>
<ul>
<li>
<p>Erstellt dazu eine Klasse <a href="https://www.w3schools.com/python/python_classes.asp" target="_blank" class="doclink"><img src="http://localhost:1313/cg-mib/images/to_doc.png" title="zur Dokumentation"></a> <code>Tower</code> mit folgenden Membervariablen:</p>
<ul>
<li><code>tower_radius</code></li>
<li><code>tower_height</code></li>
<li><code>roof_height</code></li>
<li><code>roof_overhang</code> (bestimmt wie weit das Dach über die Wand hinausragt)</li>
</ul>
</li>
<li>
<p>Nutzt die folgende Grafik, um eine Methode <code>generate_tower</code> zu schreiben, die den Turm in der Szene aufbaut</p>
</li>
</ul>
<p><img src="img/tower_sizes.png" alt="Tower"></p>

</blockquote>
<blockquote class="todo">
    <h3 id="materialien-zuweisen">Materialien zuweisen</h3>
<p>Wir wollen nun das <code>data</code> Modul benutzen, um ein Material für die beiden erstellten Objekte zu erstellen.</p>
<ul>
<li>Wechselt die 3D-Ansicht zu **Material Preview&quot;</li>
</ul>
<p><img src="img/matpreview.png" alt="preview"></p>
<ul>
<li>Erstellt ein neues Material in <code>bpy.data.materials</code> mit der <code>new</code> Funktion und stellt sicher, dass es das Material-Nodesystem benutzt</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">mat_tower</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;Tower Base Baterial&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="n">mat_tower</span><span class="o">.</span><span class="n">use_nodes</span> <span class="o">=</span> <span class="kc">True</span>
</span></span></code></pre></div><p>Wir wollen nun z.B. folgendes Node-Setup generieren, um dem Turm eine Steinziegel-Textur zu verpassen.</p>
<p><img src="img/tower_material.png" alt="towermat"></p>
<ul>
<li>Auf die einzelne Nodes des Materials kann nun über dessen Nodetree de zugegriffen werden.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">nodes</span> <span class="o">=</span> <span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1"># optional mit Type Hinting:</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="kn">import</span> <span class="nn">typing</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="n">nodes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Nodes</span><span class="p">]</span> <span class="o">=</span> <span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">nodes</span>
</span></span></code></pre></div><ul>
<li>Jeder Node hat einen Array von Inputs und Outputs, die die Sockel links und rechts repräsentieren. Der erste Input des <strong>Principled BSDF</strong> Shaders ist <strong>Base Color</strong>, daher steuern wir diesen folgendermaßen an:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">nodes</span><span class="p">[</span><span class="s2">&#34;Principled BSDF&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">default_value</span> <span class="o">=</span> <span class="n">object_color</span> 
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1"># object_color ist hier die in Übung 1 bereits erstellte Variable</span>
</span></span></code></pre></div><p><img src="img/nodes.png" alt="nodesockets"></p>
<ul>
<li>Neue Nodes können über &ldquo;new&rdquo; Methode der vorher definierten <code>nodes</code> Liste erstellt werden. Die Namen der Shadernodes können (abgesehen von der <a href="https://docs.blender.org/api/current/bpy.types.html">bpy.types Dokumentation</a>) über die <strong>Python-Tooltips</strong> im <strong>Add</strong> Menü des Shadereditors herausgefunden werden.</li>
</ul>
<p><img src="img/nodetooltip.png" alt="nodetooltip"></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">node_brick</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;ShaderNodeTexBrick&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="n">node_coords</span><span class="p">:</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Node</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;ShaderNodeTexCoord&#34;</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li>Um nun die entsprechenden Sockel der Nodes zu verbinden, nutzen wir die <code>links</code> Liste des <code>node_tree</code> des Materials</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="c1"># Hier beispielhaft zwei verschiedene Arten des Zugriffs auf die beiden verbundenen Nodes.</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1"># Über die vorher zugewiesene Variable, oder über den Namen des Nodes.</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="n">mat_tower</span><span class="o">.</span><span class="n">node_tree</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">node_brick</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">nodes</span><span class="p">[</span><span class="s2">&#34;Principled BSDF&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span></code></pre></div><ul>
<li>
<p>Erstellt so nun alle benötigten Nodes und Links zwischen ihnen</p>
</li>
<li>
<p>Nun weisen wir dem Objekt unser Material zu. Auch hier gibt es mehrere Möglichkeiten.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="c1"># dem aktuell selektiertem Objekt</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat_tower</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl">
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="c1"># oder einem in der Variable tower_base gespeichertem Objekt</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="n">tower_base</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat_tower</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="c1"># oder über das data Modul mit dem Objektnamen</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl"><span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s2">&#34;Tower Base&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat_tower</span><span class="p">)</span>
</span></span></code></pre></div>
</blockquote>
<blockquote class="todo">
    <h3 id="fenster">Fenster</h3>
<p>Der wohl schwierigste Teil dieser Aufgabe sind die Fenster. Hier werden wir mit Modifiern arbeiten.</p>
<ul>
<li>Fügt zunächst der Klasse neue - für die Fenstergenerierung wichtige Variablen hinzu. Gebt den Variablen sinnvolle default Werte</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">windows_num_circular</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="n">windows_num_vertical</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="n">windows_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="n">wall_thickness</span> <span class="o">=</span> <span class="mf">0.5</span>
</span></span></code></pre></div><ul>
<li>
<p>Wir wollen folgenden Ablauf generieren:</p>
<ol>
<li>Mehrere Würfel (<code>windows_num_circular</code>) in Fenstergröße generieren</li>
<li>Würfel kreisfärmig um den Turm herum anordnen</li>
<li>Würfel zu einem einzigen Objekt verbinden</li>
<li>Würfel mit einem <strong>Array</strong> Modifier vertikal stapeln (<code>windows_num_vertical</code>)</li>
<li>Würfel-<code>display_type</code> auf <code>WIRE</code> setzen, damit die Fenster durchsichtig sind</li>
<li>Turm einen <strong>Boolean-Modifier</strong> hinzufügen, der die Fensterformen aus dem Mesh &ldquo;herausschneidet&rdquo;</li>
<li>Towerbase einen <strong>Solidify</strong> Modifier hinzufügen, um der Wand eine Dicke zu geben</li>
</ol>
<p><img src="img/windows.png" alt="img"></p>
</li>
<li>
<p>Modifier werden Objekten über deren Liste <code>modifiers</code> mit der <code>new</code> Methode hinzugefügt. Dieser übergeben wir einen (beliebigen) namen und den großgeschriebenen Arraytypen.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">mod_solid</span> <span class="o">=</span> <span class="n">tower_base</span><span class="o">.</span><span class="n">modifiers</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;Wall Thickness&#39;</span><span class="p">,</span><span class="s1">&#39;SOLIDIFY&#39;</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li>Die Python-Tooltips können wider benutzt werden, um die Pfade zu den einzelnen Parameter der Modifier herauszufinden.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="ln">1</span><span class="cl"><span class="n">mod_solid</span><span class="o">.</span><span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wall_thickness</span>
</span></span></code></pre></div>
</blockquote>
<h2 id="ressourcen--tutorials-zum-thema">Ressourcen &amp; Tutorials zum Thema</h2>
<table>
<thead>
<tr>
<th>Art/Länge</th>
<th>Titel</th>
<th>Beschreibung</th>
<th>Quelle</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="http://localhost:1313/cg-mib/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.blender.org/api/current/bpy.context.html">bpy.context Dokumentation</a></td>
<td>Offizielle Blender API Dokumentation</td>
<td><a href="https://docs.blender.org/api/current/index.html">Blender Python API Dokumentation</a></td>
</tr>
<tr>
<td><img src="http://localhost:1313/cg-mib/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.blender.org/api/current/bpy.data.html">bpy.data Dokumentation</a></td>
<td>Offizielle Blender API Dokumentation</td>
<td><a href="https://docs.blender.org/api/current/index.html">Blender Python API Dokumentation</a></td>
</tr>
<tr>
<td><img src="http://localhost:1313/cg-mib/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.blender.org/api/current/bpy.ops.html">bpy.ops Dokumentation</a></td>
<td>Offizielle Blender API Dokumentation</td>
<td><a href="https://docs.blender.org/api/current/index.html">Blender Python API Dokumentation</a></td>
</tr>
<tr>
<td><img src="http://localhost:1313/cg-mib/general/icons/article.png" class="resicon"></td>
<td><a href="https://docs.blender.org/api/current/bpy.types.html">bpy.types Dokumentation</a></td>
<td>Offizielle Blender API Dokumentation</td>
<td><a href="https://docs.blender.org/api/current/index.html">Blender Python API Dokumentation</a></td>
</tr>
<tr>
<td><img src="http://localhost:1313/cg-mib/general/icons/video.png" class="resicon">  23min</td>
<td><a href="https://youtu.be/eo7UjKFiagk">How to create and assign a Material Shader</a></td>
<td>Ausführliches Tutorial zu Materialien in der Blender API</td>
<td><a href="https://www.youtube.com/channel/UCOUWVGNhcHEICE8AjR8up3g">YouTube -  Darkfall</a></td>
</tr>
</tbody>
</table>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://localhost:1313/cg-mib/chapter03/exercise01_a/" title="Übung 3 - Operatoren &amp; Addons">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Übung 3 - Operatoren &amp; Addons
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://localhost:1313/cg-mib/chapter11/exercise01_a/" title="Übung 11 - Animation">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Übung 11 - Animation
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="http://localhost:1313/cg-mib/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>


